import{_ as B}from"./BHQ3fbpJ.js";import{c as h,a as o,w as l,u as t,j as N,o as m,F as C,r as F,b as y,f as $,e as V,t as j,d as U,h as A,_ as L,g as E}from"./D-3yo0Mp.js";import{_ as G}from"./BKF5xlxd.js";import{a as I,_ as M}from"./IagKtW_X.js";import{_ as O}from"./CTLLGDnH.js";import{o as _,s as d,p as v,d as z,n as P,_ as T}from"./DaGkKWFa.js";import{_ as D}from"./D3QhuTF0.js";import n from"./CTyeMS5U.js";import"./B2TJdum6.js";import"./B5n3ncNc.js";import"./CnP5A1E9.js";import"./lDewecnx.js";import"./Dl_woywd.js";import"./DcY1Y3vk.js";import"./zEcIhLBw.js";import"./BvJSKjL0.js";const H={class:"p-4 flex-1"},J={class:"flex justify-end"},K={data(){return{addUser:!1,user:{roles:{value:null},branch_id:{value:null}},options:n}},methods:{createUser(){var u,e;let i={...this.user};i.roles=[(u=this.user.roles)==null?void 0:u.value],i.branch_id=(e=this.user.branch_id)==null?void 0:e.value,N("/users",{method:"POST",body:i}).then(()=>{this.addUser=!1,this.$refs.table.refresh(),this.user={roles:[]}})}}},me=Object.assign(K,{__name:"index",setup(i){const u=_({name:d("Name is required"),branch_id:_({value:v(P("branch_id is required"),z("based on is required"))}),mobile:d("Mobile is required"),password:d("Password is required"),roles:_({value:v(d("roles is required"),z("based on is required"))})});return(e,s)=>{const g=B,b=A,k=L,w=G,x=E,p=I,r=M,f=O,S=T,q=D;return m(),h("div",null,[o(w,{ref:"table",columns:t(n).columns,filters:t(n).filters,url:"/users",ui:{th:{base:"text-left"}}},{"roles-data":l(({row:a})=>[(m(!0),h(C,null,F(a.roles,c=>(m(),y(g,{key:c.name,ui:{rounded:"rounded-full"},class:"mx-1 capitalize",size:"xs",label:c.name,color:c.name.toLowerCase().includes("admin")?"emerald":"orange"},null,8,["label","color"]))),128))]),"extra-header":l(()=>[e.$can("create users")?(m(),y(b,{key:0,size:"xs",onClick:s[0]||(s[0]=a=>e.addUser=!0),label:"اضافة مستخدم"})):$("",!0)]),"name-data":l(({row:a})=>[o(k,{class:"text-primary font-bold underline dark:text-gray-400",to:{name:"users-id",params:{id:a.id}}},{default:l(()=>[V(j(a.name),1)]),_:2},1032,["to"])]),_:1},8,["columns","filters"]),o(q,{modelValue:e.addUser,"onUpdate:modelValue":s[6]||(s[6]=a=>e.addUser=a)},{default:l(()=>[U("div",H,[o(S,{schema:t(u),state:e.user,onSubmit:e.createUser},{default:l(()=>[U("div",J,[o(b,{type:"submit",color:"primary",variant:"outline"},{default:l(()=>[o(x,{name:"heroicons:user-plus"}),V(" Create User ")]),_:1})]),o(r,{class:"my-2 capitalize",label:"الاسم",name:"name"},{default:l(()=>[o(p,{icon:"i-heroicons-user-circle",size:"md",modelValue:e.user.name,"onUpdate:modelValue":s[1]||(s[1]=a=>e.user.name=a),variant:"outline"},null,8,["modelValue"])]),_:1}),o(r,{class:"my-2 capitalize",label:"موبايل",name:"mobile"},{default:l(()=>[o(p,{icon:"i-heroicons-at-symbol",size:"md",modelValue:e.user.mobile,"onUpdate:modelValue":s[2]||(s[2]=a=>e.user.mobile=a),variant:"outline"},null,8,["modelValue"])]),_:1}),o(r,{class:"my-2 capitalize",label:"كلمة المرور",name:"password"},{default:l(()=>[o(p,{icon:"i-heroicons-finger-print-solid",size:"md",type:"password",modelValue:e.user.password,"onUpdate:modelValue":s[3]||(s[3]=a=>e.user.password=a),variant:"outline"},null,8,["modelValue"])]),_:1}),o(r,{class:"my-2 capitalize",label:"الدور",name:"roles.value"},{default:l(()=>[o(f,{modelValue:e.user.roles,"onUpdate:modelValue":s[4]||(s[4]=a=>e.user.roles=a),"option-attribute":"value",by:"value",searchable:t(n).searchAsync,placeholder:"Select roles..."},null,8,["modelValue","searchable"])]),_:1}),o(r,{class:"my-2 capitalize",label:"الفرع",name:"branch_id.value"},{default:l(()=>[o(f,{modelValue:e.user.branch_id,"onUpdate:modelValue":s[5]||(s[5]=a=>e.user.branch_id=a),"option-attribute":"label",by:"value",searchable:t(n).searchGroupAsync,placeholder:"Select branch..."},null,8,["modelValue","searchable"])]),_:1})]),_:1},8,["schema","state","onSubmit"])])]),_:1},8,["modelValue"])])}}});export{me as default};
