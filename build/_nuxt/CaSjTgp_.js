import{l as U,j as l,P as m,m as g,i as A,b as d,w as n,o as t,c,a,e as B,f as C,F as N,r as S,g as j,h as z}from"./DI0QmMHN.js";import{_ as F}from"./BbhU28nd.js";import{_ as P}from"./-F6Swwe5.js";import{a as T}from"./DIat6p7k.js";import{_ as q}from"./3W2gftv3.js";import{_ as G}from"./0G-qBHTW.js";import{_ as I}from"./zTCSY_W6.js";import R from"./BXOzhPTg.js";import"./D5_JmO13.js";import"./7YEkxXYt.js";import"./DoG2p7RH.js";const E={data(){return{resource:null,options:R}},mounted(){l(`/users/${(this._.provides[m]||this.$route).params.id}`).then(e=>{this.resource={name:e.name,mobile:e.mobile,password:null,roles:e.roles.map(o=>({label:o.name,value:o.id})),branch:e.branch}})},methods:{searchAsync:async e=>{const{data:o}=await l("/roles",{query:{search:e}});return o.map(u=>({label:u.name,value:u.id}))},searchGroupsAsync:async e=>{const{data:o}=await l("/branches",{query:{search:e}});return o},save(){let e={...this.resource,branch_id:this.resource.branch.id,roles:[this.resource.roles[0].label]};e.password||delete e.password,l(`/users/${(this._.provides[m]||this.$route).params.id}`,{method:"PUT",body:e}).then(()=>{g().add({title:"User updated success",icon:"i-heroicons-check-circle-20-solid"}),A().replace({name:"users-id",params:{id:(this._.provides[m]||this.$route).params.id}})})}}},L={key:0,class:"py-4 mb-8 rounded-md"},M={key:0,class:"flex justify-end"},D={key:0},H={key:1},J={key:1,class:"p-4"};function K(e,o,u,O,s,i){const h=j,b=z,y=F,p=P,f=T,v=q,k=G,w=I;return t(),d(w,{class:"w-full"},{default:n(()=>[s.resource?(t(),c("div",L,[e.$can("update users")?(t(),c("div",M,[a(b,{onClick:i.save,color:"primary",variant:"outline"},{default:n(()=>[a(h,{name:"iconoir:save-floppy-disk"}),B(" Save ")]),_:1},8,["onClick"])])):C("",!0),a(v,{resource:s.resource},{roles:n(()=>[a(p,{modelValue:s.resource.roles,"onUpdate:modelValue":o[0]||(o[0]=r=>s.resource.roles=r),multiple:"",placeholder:"select the roles ....",by:"value","option-attribute":"label",searchable:i.searchAsync,"searchable-placeholder":"Search...",class:"w-2/4 py-2"},{label:n(()=>{var r,_;return[(_=(r=s.resource)==null?void 0:r.roles)!=null&&_.length?(t(),c("span",D,[(t(!0),c(N,null,S(s.resource.roles,(x,V)=>(t(),d(y,{class:"mr-2 capitalize justify-center",size:"xs",label:x.label||"N/A",color:"primary",key:V},null,8,["label"]))),128))])):(t(),c("span",H,"No roles attached"))]}),_:1},8,["modelValue","searchable"])]),password:n(()=>[a(f,{icon:"i-heroicons-finger-print-solid",size:"md",type:"password",modelValue:s.resource.password,"onUpdate:modelValue":o[1]||(o[1]=r=>s.resource.password=r),variant:"outline"},null,8,["modelValue"])]),branch:n(()=>[a(p,{modelValue:s.resource.branch,"onUpdate:modelValue":o[2]||(o[2]=r=>s.resource.branch=r),placeholder:"select the branch ....",by:"id","option-attribute":"name",searchable:i.searchGroupsAsync,"searchable-placeholder":"Search...",class:"w-2/4 py-2"},null,8,["modelValue","searchable"])]),_:1},8,["resource"])])):(t(),c("div",J,[a(k,{count:8})]))]),_:1})}const ae=U(E,[["render",K]]);export{ae as default};
