import{l as A,j as g,P as y,m as U,c as r,a as e,w as t,d as l,o as i,e as j,f as E,t as N,F as I,r as R,b as D,g as L,h as M,_ as $}from"./BKwvWj0J.js";import{a as G,_ as O}from"./DBtcAyHW.js";import{_ as q}from"./CDWY3MSr.js";import{_ as H}from"./DIjVvoM_.js";import{_ as J}from"./CyA9vuDO.js";import{_ as K}from"./Dp2cmGcb.js";import{_ as Q}from"./DjAL3oZR.js";import{_ as W}from"./8N1YBA5G.js";import X from"./Cx8uKsjG.js";import"./fs8IZBRf.js";import"./ByQx-DHy.js";import"./BpaF6LCI.js";import"./Bozeoiuf.js";const Y={data(){return{response:null,resource:null,config:{values:[]},options:X}},methods:{save(){g(`/channels/${(this._.provides[y]||this.$route).params.id}`,{method:"PUT",body:{...this.resource}}).then(()=>{U().add({title:"channel updated success",icon:"i-heroicons-check-circle-20-solid"})})}},methods:{addConfig(){this.config.values.push({name:"",value:""})},removeConfig(a){this.config.values.splice(a,1)},save(){const a={};this.config.values.forEach(u=>{a[u.name]=u.value});const d={...this.response,...this.resource,config:{values:a}};g(`/channels/${(this._.provides[y]||this.$route).params.id}`,{method:"PUT",body:d}).then(u=>{U().add({title:"Created successfully",icon:"i-heroicons-x-mark",color:"green"})})}},mounted(){g(`/channels/${(this._.provides[y]||this.$route).params.id}`).then(a=>{var p;this.response=a;const{updated_at:d,created_by:u,created_at:x,channels:n,reviewed:_,config:h,rules_ids:m,available_rules:f,activities:b,...v}=a;this.resource=v,this.response.rules_ids=this.response.rules_ids.filter(c=>this.response.available_rules.includes(c)),(p=this.response.config)!=null&&p.values&&Object.keys(this.response.config.values).forEach(c=>{this.config.values.push({name:c,value:this.response.config.values[c]})})})}},Z={key:0},ee={class:"py-4 mb-8 rounded-md bg-white-bk"},se={key:0,class:"flex justify-end"},oe={class:"pl-2 col-start-2"},te={key:0},ne={key:1},ae={class:"py-4 mb-8 rounded-md bg-white-bk"},le=l("div",{class:"p-4 flex justify-between items-center"},[l("p",null,"Configs")],-1),ie={class:"flex flex-col items-center justify-center flex-1 px-6 py-5 sm:px-14"},re={class:"flex items-center justify-center gap-5"},ce=l("span",{class:"text-gray-400"},"No Configs",-1),de={class:"flex justify-end gap-5"},ue={key:1};function pe(a,d,u,x,n,_){const h=L,m=M,f=G,b=$,v=q,p=H,c=J,B=O,k=K,T=Q,z=W;return i(),r("div",null,[n.response?(i(),r("div",Z,[e(k,{class:"w-full"},{default:t(()=>[l("div",null,[l("div",ee,[a.$can("update channels")?(i(),r("div",se,[e(m,{onClick:_.save,color:"primary",variant:"outline"},{default:t(()=>[e(h,{name:"iconoir:save-floppy-disk"}),j(" Save ")]),_:1},8,["onClick"])])):E("",!0),e(v,{resource:n.resource},{id:t(({value:s})=>[e(f,{disabled:"",value:s},null,8,["value"])]),merchant:t(({value:s})=>[e(b,{to:{name:"merchants-id",params:{id:s.id}},class:"relative block w-full underline font-bold text-primary focus:outline-none border-0 form-input rounded-md text-sm px-3 py-2 shadow-sm bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white ring-1 ring-inset ring-gray-300 dark:ring-gray-700 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"},{default:t(()=>[j(N(s.name),1)]),_:2},1032,["to"])]),_:1},8,["resource"]),e(B,{label:"Rules"},{default:t(()=>{var s;return[e(c,{uiMenu:{option:{container:"flex items-center gap-1.5 min-w-0 pl-10",selectedIcon:{wrapper:"absolute inset-y-0 start-0 flex items-center px-4"}}},modelValue:n.response.rules_ids,"onUpdate:modelValue":d[0]||(d[0]=o=>n.response.rules_ids=o),"value-attribute":"id","option-attribute":"name",options:(s=n.response)==null?void 0:s.available_rules,multiple:"",placeholder:"Rules"},{option:t(({option:o})=>[e(p,{class:"capitalize text-[10px] p-1 py-0 justify-center w-11",label:o.is_default?"default":"custom",color:o.is_default?"blue":"teal"},null,8,["label","color"]),l("span",oe,N(o.name),1)]),label:t(()=>{var o,w;return[(w=(o=n.response)==null?void 0:o.rules_ids)!=null&&w.length?(i(),r("span",te,[(i(!0),r(I,null,R(n.response.rules_ids,(F,P)=>{var C,V;return i(),D(p,{class:"mr-2 capitalize justify-center",size:"xs",label:((V=(C=n.response)==null?void 0:C.available_rules.filter(S=>S.id==F)[0])==null?void 0:V.name)||"N/A",color:"primary",key:P},null,8,["label"])}),128))])):(i(),r("span",ne,"No rules attached"))]}),_:1},8,["modelValue","options"])]}),_:1})])])]),_:1}),l("div",ae,[e(k,{class:"w-full",ui:{base:"",ring:"",divide:"divide-y divide-gray-200 dark:divide-gray-700 min-w-fit",header:{padding:"px-4 py-5"},body:{padding:"",base:"divide-y divide-gray-200 dark:divide-gray-700 min-w-fit"},footer:{padding:"p-4"}}},{footer:t(()=>[l("div",de,[e(m,{onClick:_.addConfig,icon:"i-line-md-plus",variant:"link",color:"green",label:"Add config"},null,8,["onClick"])])]),default:t(()=>[le,e(T,{ui:{th:{base:"text-left last:text-center last:w-5 last:pr-5  last:px-0"},td:{base:"last:text-center last:w-5 last:pr-5  last:px-0"}},rows:n.config.values,columns:[{label:"Name",key:"name"},{label:"Value",key:"value"},{label:"Delete",key:"delete"}],"sort-asc-icon":"i-heroicons-arrow-up","sort-desc-icon":"i-heroicons-arrow-down",class:"w-full"},{"name-data":t(({row:s})=>[e(f,{color:`${n.config.values.filter(o=>o.name==s.name).length>1?"red":"white"}`,modelValue:s.name,"onUpdate:modelValue":o=>s.name=o},null,8,["color","modelValue","onUpdate:modelValue"])]),"value-data":t(({row:s})=>[e(f,{modelValue:s.value,"onUpdate:modelValue":o=>s.value=o},null,8,["modelValue","onUpdate:modelValue"])]),"delete-data":t(({index:s})=>[e(m,{class:"mx-1",onClick:o=>_.removeConfig(s),icon:"i-heroicons-trash",variant:"soft",color:"red"},null,8,["onClick"])]),"empty-state":t(()=>[l("div",ie,[l("div",re,[e(h,{color:"rgb(var(--color-gray-400) / var(--tw-text-opacity))",name:"iconoir:info-empty",size:"50px"}),ce])])]),_:1},8,["rows"])]),_:1})])])):(i(),r("div",ue,[e(z,{count:8})]))])}const Ue=A(Y,[["render",pe]]);export{Ue as default};
